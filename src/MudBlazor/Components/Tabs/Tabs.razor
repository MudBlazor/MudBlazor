@namespace MudBlazor

<div class="mud-tabs mud-tabs-fixed">
    <CascadingValue Value="this">
        <div class="mud-tabs-toolbar">
            @foreach (TabPanel TabPanel in Panels)
            {
                <MudButton Variant="Variant.Text" class="@GetActiveClass(TabPanel)" @onclick=@( () => ActivatePanel(TabPanel) )>@TabPanel.Text</MudButton>
            }
        </div>
        <div class="mud-tabs-panels">
            @ChildContent
        </div>
    </CascadingValue>
</div>


@code {

    [Parameter] public RenderFragment ChildContent { get; set; }

    public TabPanel ActivePanel { get; set; }

    List<TabPanel> Panels = new List<TabPanel>();

    internal void AddPanel(TabPanel tabPanel)
    {
        Panels.Add(tabPanel);
        if (Panels.Count == 1)
            ActivePanel = tabPanel;
        StateHasChanged();

    }

    string GetActiveClass(TabPanel Panel)
    {
        return Panel == ActivePanel ? "mud-button-text-primary" : "mud-button-text-default";
    }
    void ActivatePanel(TabPanel Panel)
    {
        ActivePanel = Panel;

    }
}