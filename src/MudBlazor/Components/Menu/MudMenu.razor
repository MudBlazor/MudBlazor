@namespace MudBlazor
@using MudBlazor.Interfaces
@inherits MudBaseButton



<div class="@Classname" style="@Style" 
     @onmouseenter="@(ActivationEvent== MouseEvent.MouseOver ? HandleMouseEnter : null)"
     oncontextmenu="@(ActivationEvent == MouseEvent.RightClick ? "return false;" : "")">
    @if (ActivatorContent != null)
    {
        <CascadingValue Value="@((IActivatable) this)" IsFixed="true">
            <div @onmouseup="ToggleMenu" @ref="_activatorRef">
                @ActivatorContent
            </div>
        </CascadingValue>
    }
    else if (String.IsNullOrEmpty(Icon))
    {
        <MudButton StartIcon="@StartIcon"
               EndIcon="@EndIcon"
               IconColor="@IconColor"
               Color="@Color"
               Size="@Size"
               Variant="@Variant"
               Disabled="@Disabled"
               DisableRipple="@DisableRipple"
               DisableElevation="@DisableElevation"
              
               @onclick="@ToggleMenu">
            @Label
        </MudButton>
    }
    else
    {
        <MudIconButton Icon="@Icon" Color="@Color" Size="@Size" Disabled="@Disabled" DisableRipple="@DisableRipple" @onclick="@ToggleMenu" />
    }

        <MudPopover Open="@(_isOpen)"  Class="@MenuClassname" MaxHeight="@MaxHeight" Style="@PopoverStyle" Direction="@Direction" OffsetX="@OffsetX" OffsetY="@OffsetY">
            <CascadingValue Value="@this">
                <MudList Clickable="true" Dense="@Dense">
                    @ChildContent
                </MudList>
            </CascadingValue>
        </MudPopover>

 
    <MudOverlay Visible="@(_isOpen)" OnClick="@ToggleMenu" LockScroll="false" />
</div>


