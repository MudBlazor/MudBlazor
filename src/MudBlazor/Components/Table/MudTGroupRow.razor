@namespace MudBlazor
@implements IDisposable
@inherits MudComponentBase
@typeparam T

@*HEADER:*@
@if (HeaderTemplate != null && GroupDefinition != null)
{
<tr class="@HeaderClass" @onclick="@OnRowClick" style="@HeaderStyle" @attributes="@UserAttributes">
    @if ((Context?.Table.MultiSelection ?? false))
    {
        <MudTd>
            @if (IsCheckable)
            {
                <MudCheckBox @bind-Checked="IsChecked" />
            }
        </MudTd>
    }
    @HeaderTemplate(new TableGroupData<object, T>(GroupDefinition.GroupName, Items.Key, Items.ToList()))
    @if ((Context?.Table.IsEditable ?? false))
    {
        <MudTd />
    }
</tr>
}
else
{
<MudText @attributes="@UserAttributes">@("There aren't any group definition to use with this component.")</MudText>
}

@*CHILDREN:*@
@if (_innerGroupItems != null && GroupDefinition != null)
{
    @foreach (var group in _innerGroupItems)
    {
        <MudTGroupRow GroupDefinition="GroupDefinition.InnerGroup" Items="@group" IsCheckable="@IsCheckable"
                      HeaderClass="@HeaderClass" HeaderStyle="@HeaderStyle"
                      FooterClass="@FooterClass" FooterStyle="@FooterStyle"
                      HeaderTemplate="@HeaderTemplate" FooterTemplate="@FooterTemplate" T="T" @attributes="@UserAttributes" />
    }
}
else
{
    @Table?.RenderRows(Items)
}

@*FOOTER:*@
@if (FooterTemplate != null && GroupDefinition != null)
{
    <tr class="@FooterClass" @onclick="@OnRowClick" style="@FooterStyle" @attributes="@UserAttributes">
        @if ((Context?.Table.MultiSelection ?? false))
        {
            <MudTd>
                @if (IsCheckable)
                {
                    <MudCheckBox @bind-Checked="IsChecked" />
                }
            </MudTd>
        }
        @FooterTemplate(new TableGroupData<object, T>(GroupDefinition.GroupName, Items.Key, Items.ToList()))
        @if ((Context?.Table.IsEditable ?? false))
        {
            <MudTd />
        }
    </tr>
}